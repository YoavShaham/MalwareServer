import { useState } from 'react';
import './App.css';
import Axios from 'axios'
import * as React from 'react';
import Box from '@mui/material/Box';
import InputLabel from '@mui/material/InputLabel';
import MenuItem from '@mui/material/MenuItem';
import FormControl from '@mui/material/FormControl';
import Select from '@mui/material/Select';
import TextField from '@mui/material/TextField';
import Button from '@mui/material/Button'
import SelectSmall, {GetRequestTypeEx} from './select'
import SearchVirusTotalDomain from './service'


const VirusTotal = () => {
  const [requestType, setRequestType] = React.useState(''); 
  const [requestValue, setRequestValue] = React.useState('');   
  
    const handleSelectChange = (event) => {
      setRequestType(event.target.value);
    };

    const handleTextChange = (event) => {
      setRequestValue(event.target.value);
    };

    const ConductQuery = async (event) => {
      if(requestType == 'domain'){
        let result = SearchVirusTotalDomain(requestType, requestValue)
      }
    }

  return (
    <div className='virustotal'>
        <p>This is a virus total api service</p>
        <p>You can conduct queries based on: url, ip, domain and hash</p>
        <FormControl sx={{ m: 1, minWidth: 120 }} size="small">
        <InputLabel id="demo-select-small">Request Type</InputLabel>
        <Select
          labelId="demo-select-small"
          id="demo-select-small"
          value={requestType}
          label="Request Type"
          onChange={handleSelectChange}
        >
          <MenuItem value="">
            <em>None</em>
          </MenuItem>
          <MenuItem value={"id"}>Id</MenuItem>
          <MenuItem value={"domain"}>Domain</MenuItem>
          <MenuItem value={"hash"}>Hash</MenuItem>
          <MenuItem value={"url"}>Url</MenuItem>
        </Select>
      </FormControl>
      <TextField
        id="request_value_input"
        label="Request Value"
        value={requestValue}
        onChange={handleTextChange}
      />
      <Button onClick={ConductQuery}>Conduct query</Button>
      <p>{requestType}</p>
    </div>
  )
}

export default VirusTotal