import Axios from 'axios'
import TextField from '@mui/material/TextField';
import { useState, useEffect, useMemo } from 'react';
import {useAxiosPost} from './axios-api';

const SearchVirusTotalDomain = (searchType, searchValue) => {
  const { data, error, loaded } = useAxiosPost(
    "http://localhost:9000/getVirusTotalDomainViaBot",
    {
      headers: {
        'Content-Type': 'application/json',
        'Access-Control-Allow-Origin': '*'
    },
    params: {
        'domain': searchValue
    }
    }
  );

  console.log(data);
  const stringifiedData = useMemo(() => {
    return JSON.stringify(data || {});
  }, [data]);

  if (loaded) {
    return error ? (
      <span>Error: {error}</span>
    ) : (
      <p>{stringifiedData}</p>
    );
  }
  return <span>Loading...</span>;
};
  //console.log(data)
  /*const [domain, setDomain] = useState('');

  useEffect(() =>{
  Axios.post('http://localhost:9000/getVirusTotalDomainViaBot', {
    headers: {
        'Content-Type': 'application/json',
        'Access-Control-Allow-Origin': '*'
    },
    params: {
        'domain': searchValue
    }

})
    .then((resp) => {
      console.log(resp.data)
      setDomain(resp.data['domain'])
    })
  }, []);

    
    return (
      <div>
        {domain !== '' ? (
          <TextField id="standard-basic" label="Yoav" variant="standard" />
        ) : (
          <div>Loading post...</div>
        )}
      </div>
    )
        
       return (<p>aa</p>)
  */

export default SearchVirusTotalDomain