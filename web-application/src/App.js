import { useState } from 'react';
import './App.css';
import Axios from 'axios'
import { NavLink, Switch, Route } from 'react-router-dom';


const App = () => {

  const [keyword, setKeyword] = useState("");
  const [searchedByColum, setSearchedByColum] = useState("");

  const [name, setName] = useState("");
  const [id, setId] = useState("");
  const [description, setDescription] = useState("");
  const [platforms, setPlatforms] = useState("");
  const [detection, setDetection] = useState("");
  const [phases, setPhases] = useState("");

  const[attacksList, setAttacksList] = useState([]);

  const columns = [
    { key: 'ID', name: 'ID' },
    { key: 'DESCRIPTION', name: 'DESCRIPTION' },
    { key: 'NAME', name: 'NAME' }, 
    { key: 'phase_name', name: 'phase_name'},
    { key: 'x_mitre_detection', name: 'x_mitre_detection'},
    { key: 'x_mitre_platforms', name:'x_mitre_platforms'}];
  
    //getting attacks that match keyword
  const searchByKeyword = () =>{
    console.log(keyword);
    Axios.post('http://localhost:9001/getAttacks', {
      keyword: keyword ,
      colum: searchedByColum
    }).then((resp) => {
      console.log(resp);
      setAttacksList(resp.data['rows']);
    });
  }


  return (
    <div className="App" >
      
      <h1>Welcome</h1>
      <p>Enter a keyword to search by</p>
        <div className="input">
        <label>Input: </label>
        {/*getting keyword */}
        <input type="text" onChange= {(event)=> {
          setKeyword(event.target.value);
          setSearchedByColum("DESCRIPTION");
        }}/>
        <br></br>
        
      </div>
      <div className="attacks">
        <button onClick={searchByKeyword}>search</button>
        {/* showing attacks to the user */}

        {attacksList.map((val, key) => {
          console.log(key);
          return (
              
            <div className="attack" key={key}>
              <div>
                <h3>Name: {val.NAME}</h3>
                <h3>Id: {val.ID}</h3>
                <h3>Description: {val.DESCRIPTION}</h3>
                <h3>Platforms: {val.x_mitre_platforms}</h3>
                <h3>detection: {val.x_mitre_detection}</h3>
                <h3>Phases: {val.phase_name}</h3>
              </div>
            </div>
          );
        })}
      </div>
      </div>
  );
}

const Navigation = () => {
  <nav>
    <ul>
      <li><NavLink exact activeClassName='current' to='/'>Home</NavLink></li>
      <li><NavLink exact activeClassName='current' to='/DB'>DB</NavLink></li>
      <li><NavLink exact activeClassName='current' to='/VirusTotal'>VirusTotal</NavLink></li>
    </ul>
  </nav>
}

const Main = () => {
  <Switch>
    <Route exact path='/' component={Home}></Route>
    <Route exact path='/DB' component={DB}></Route>
    <Route exact path='/VirusTotal' component={VirusTotal}></Route>
  </Switch>
}

export default App;
