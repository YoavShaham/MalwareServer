'use strict'

module.exports = (app, options) => {
    const {repo} = options

    // This function gets the attacks from the db
    app.post('/getAttacks', (req, res, next) => {
        repo.getAttacks(req.body.keyword, req.body.colum)
    .then(rows => {
        res.send(rows)
    })
    .catch(next)
    });

    // This function gets the attacks from the db
    app.post('/GetAttacksViaBot', (req, res, next) => {
        repo.getAttacks(req.query.keyword, req.query.colum)
    .then(rows => {
        res.send(rows)
    })
    .catch(next)
    });

}
